#include "Ghost.h"
#include "Direction.h"

static unsigned int GHOSTS[NUM_GHOST*(GHOST_SIZE*GHOST_SIZE)] = {
    0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,
    0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,
    0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,
    0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,
    0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,
    0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,
    0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,
    0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,
    0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0x000000,0x000000,0xffff00,0xffff00,0xffff00,0xffff00,0xffff00,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
    0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000
};

Ghost::Ghost(Collider c, int ghost, int x, int y, int width, int height) : Sprite(GHOSTS+ghost*(GHOST_SIZE*GHOST_SIZE), 1, x, y, width, height) {
    mode = CHASE;
    modeTime = 0;
    alive = false;
    coll = c;
}

Ghost::Ghost(Collider c, int ghost, Position pos, Size sz) : Sprite(GHOSTS+ghost*(GHOST_SIZE*GHOST_SIZE), 1, pos, sz) {
    mode = CHASE;
    modeTime = 0;
    alive = false;
    coll = c;
}

void Ghost::update(unsigned int frame) {

}

void Ghost::move() {
    if (coll.at_intersection(position.x, position.y)) {
        // Chose Direction
    } else {
        // Move Forward
        switch  (dir) {
            case North:
            position.y -= 1;
            break;
            case East:
            position.x += 1;
            break;
            case South:
            position.y += 1;
            break;
            case West:
            position.x -= 1;
            break;
        }
    }
}

void Ghost::kill() {
    alive = false;
}